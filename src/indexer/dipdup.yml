hooks:
  fetch_liquidity_baking_prices:
    callback: fetch_liquidity_baking_prices
    atomic: false
    args:
      datasource: str
      batch_size: int

jobs:
  fetch_liquidity_baking_prices:
    hook: fetch_liquidity_baking_prices
    interval: 500
    args:
      datasource: tzkt_mainnet
      batch_size: 10000

templates:
  # Treasury token balance template
  treasury_token_transfer_receiver_template:
    kind: token_transfer
    datasource: tzkt_ghostnet
    handlers:
    - callback: on_treasury_token_transfer_receiver
      to: <treasury_contract>
      first_level: <first_level>

  # Farm template
  farm_template:
    kind: operation
    datasource: tzkt_ghostnet
    types:
    - transaction
    contracts:
    - <farm_contract>
    handlers:
    - callback: on_farm_set_admin
      pattern:
      - destination: <farm_contract>
        entrypoint: setAdmin
    - callback: on_farm_set_governance
      pattern:
      - destination: <farm_contract>
        entrypoint: setGovernance
    - callback: on_farm_update_config
      pattern:
      - destination: <farm_contract>
        entrypoint: updateConfig
    - callback: on_farm_update_whitelist_contracts
      pattern:
      - destination: <farm_contract>
        entrypoint: updateWhitelistContracts
    - callback: on_farm_update_general_contracts
      pattern:
      - destination: <farm_contract>
        entrypoint: updateGeneralContracts
    - callback: on_farm_init_farm
      pattern:
      - destination: <farm_contract>
        entrypoint: initFarm
    - callback: on_farm_close_farm
      pattern:
      - destination: <farm_contract>
        entrypoint: closeFarm
    - callback: on_farm_pause_all
      pattern:
      - destination: <farm_contract>
        entrypoint: pauseAll
    - callback: on_farm_unpause_all
      pattern:
      - destination: <farm_contract>
        entrypoint: unpauseAll
    - callback: on_farm_toggle_pause_entrypoint
      pattern:
      - destination: <farm_contract>
        entrypoint: togglePauseEntrypoint
    - callback: on_farm_deposit
      pattern:
      - destination: <farm_contract>
        entrypoint: deposit
    - callback: on_farm_withdraw
      pattern:
      - destination: <farm_contract>
        entrypoint: withdraw
    - callback: on_farm_claim
      pattern:
      - destination: <farm_contract>
        entrypoint: claim
    - callback: on_farm_set_lambda
      pattern:
      - destination: <farm_contract>
        entrypoint: setLambda

  # MFarm template
  m_farm_template:
    kind: operation
    datasource: tzkt_ghostnet
    types:
    - transaction
    contracts:
    - <m_farm_contract>
    handlers:
    - callback: on_m_farm_set_admin
      pattern:
      - destination: <m_farm_contract>
        entrypoint: setAdmin
    - callback: on_m_farm_set_governance
      pattern:
      - destination: <m_farm_contract>
        entrypoint: setGovernance
    - callback: on_m_farm_update_config
      pattern:
      - destination: <m_farm_contract>
        entrypoint: updateConfig
    - callback: on_m_farm_update_whitelist_contracts
      pattern:
      - destination: <m_farm_contract>
        entrypoint: updateWhitelistContracts
    - callback: on_m_farm_update_general_contracts
      pattern:
      - destination: <m_farm_contract>
        entrypoint: updateGeneralContracts
    - callback: on_m_farm_init_farm
      pattern:
      - destination: <m_farm_contract>
        entrypoint: initFarm
    - callback: on_m_farm_close_farm
      pattern:
      - destination: <m_farm_contract>
        entrypoint: closeFarm
    - callback: on_m_farm_pause_all
      pattern:
      - destination: <m_farm_contract>
        entrypoint: pauseAll
    - callback: on_m_farm_unpause_all
      pattern:
      - destination: <m_farm_contract>
        entrypoint: unpauseAll
    - callback: on_m_farm_toggle_pause_entrypoint
      pattern:
      - destination: <m_farm_contract>
        entrypoint: togglePauseEntrypoint
    - callback: on_m_farm_deposit
      pattern:
      - destination: <m_farm_contract>
        entrypoint: deposit
    - callback: on_m_farm_withdraw
      pattern:
      - destination: <m_farm_contract>
        entrypoint: withdraw
    - callback: on_m_farm_claim
      pattern:
      - destination: <m_farm_contract>
        entrypoint: claim
    - callback: on_m_farm_set_lambda
      pattern:
      - destination: <m_farm_contract>
        entrypoint: setLambda

  # Treasury template
  treasury_template:
    kind: operation
    datasource: tzkt_ghostnet
    types:
    - transaction
    contracts:
    - <treasury_contract>
    handlers:
    - callback: on_treasury_set_admin
      pattern:
      - destination: <treasury_contract>
        entrypoint: setAdmin
    - callback: on_treasury_set_governance
      pattern:
      - destination: <treasury_contract>
        entrypoint: setGovernance
    - callback: on_treasury_set_baker
      pattern:
      - destination: <treasury_contract>
        entrypoint: setBaker
    - callback: on_treasury_update_general_contracts
      pattern:
      - destination: <treasury_contract>
        entrypoint: updateGeneralContracts
    - callback: on_treasury_update_whitelist_contracts
      pattern:
      - destination: <treasury_contract>
        entrypoint: updateWhitelistContracts
    - callback: on_treasury_update_whitelist_token_contracts
      pattern:
      - destination: <treasury_contract>
        entrypoint: updateWhitelistTokenContracts
    - callback: on_treasury_pause_all
      pattern:
      - destination: <treasury_contract>
        entrypoint: pauseAll
    - callback: on_treasury_unpause_all
      pattern:
      - destination: <treasury_contract>
        entrypoint: unpauseAll
    - callback: on_treasury_toggle_pause_entrypoint
      pattern:
      - destination: <treasury_contract>
        entrypoint: togglePauseEntrypoint
    - callback: on_treasury_default
      pattern:
      - destination: <treasury_contract>
        entrypoint: default
    - callback: on_treasury_transfer
      pattern:
      - destination: <treasury_contract>
        entrypoint: transfer
    - callback: on_treasury_set_lambda
      pattern:
      - destination: <treasury_contract>
        entrypoint: setLambda

  # Aggregator template
  aggregator_template:
    kind: operation
    datasource: tzkt_ghostnet
    types:
    - transaction
    contracts:
    - <aggregator_contract>
    handlers:
    - callback: on_aggregator_set_admin
      pattern:
      - destination: <aggregator_contract>
        entrypoint: setAdmin
    - callback: on_aggregator_set_governance
      pattern:
      - destination: <aggregator_contract>
        entrypoint: setGovernance
    - callback: on_aggregator_set_name
      pattern:
      - destination: <aggregator_contract>
        entrypoint: setName
    - callback: on_aggregator_update_metadata
      pattern:
      - destination: <aggregator_contract>
        entrypoint: updateMetadata
    - callback: on_aggregator_update_config
      pattern:
      - destination: <aggregator_contract>
        entrypoint: updateConfig
    - callback: on_aggregator_update_whitelist_contracts
      pattern:
      - destination: <aggregator_contract>
        entrypoint: updateWhitelistContracts
    - callback: on_aggregator_update_general_contracts
      pattern:
      - destination: <aggregator_contract>
        entrypoint: updateGeneralContracts
    - callback: on_aggregator_add_oracle
      pattern:
      - destination: <aggregator_contract>
        entrypoint: addOracle
    - callback: on_aggregator_update_oracle
      pattern:
      - destination: <aggregator_contract>
        entrypoint: updateOracle
    - callback: on_aggregator_remove_oracle
      pattern:
      - destination: <aggregator_contract>
        entrypoint: removeOracle
    - callback: on_aggregator_pause_all
      pattern:
      - destination: <aggregator_contract>
        entrypoint: pauseAll
    - callback: on_aggregator_unpause_all
      pattern:
      - destination: <aggregator_contract>
        entrypoint: unpauseAll
    - callback: on_aggregator_toggle_pause_entrypoint
      pattern:
      - destination: <aggregator_contract>
        entrypoint: togglePauseEntrypoint
    - callback: on_aggregator_update_data
      pattern:
      - destination: <aggregator_contract>
        entrypoint: updateData
    - callback: on_aggregator_withdraw_reward_xtz
      pattern:
      - destination: <aggregator_contract>
        entrypoint: withdrawRewardXtz
    - callback: on_aggregator_withdraw_reward_staked_mvk
      pattern:
      - destination: <aggregator_contract>
        entrypoint: withdrawRewardStakedMvk
    - callback: on_aggregator_set_lambda
      pattern:
      - destination: <aggregator_contract>
        entrypoint: setLambda

  # Vault template
  vault_template:
    kind: operation
    datasource: tzkt_ghostnet
    types:
    - transaction
    contracts:
    - <vault_contract>
    handlers:
    - callback: on_vault_update_depositor
      pattern:
      - destination: <vault_contract>
        entrypoint: updateDepositor
    - callback: on_vault_set_baker
      pattern:
      - destination: <vault_contract>
        entrypoint: setBaker
    - callback: on_vault_update_vault_name
      pattern:
      - destination: <vault_contract>
        entrypoint: updateVaultName
  # MToken template
  m_token_template:
    kind: operation
    datasource: tzkt_ghostnet
    types:
    - origination
    - transaction
    contracts:
    - <m_token_contract>
    handlers:
    - callback: on_m_token_origination
      pattern:
      - type: origination
        originated_contract: <m_token_contract>
    - callback: on_m_token_set_admin
      pattern:
      - destination: <m_token_contract>
        entrypoint: setAdmin
    - callback: on_m_token_set_governance
      pattern:
      - destination: <m_token_contract>
        entrypoint: setGovernance
    - callback: on_m_token_update_whitelist_contracts
      pattern:
      - destination: <m_token_contract>
        entrypoint: updateWhitelistContracts
    - callback: on_m_token_transfer
      pattern:
      - destination: <m_token_contract>
        entrypoint: transfer
    - callback: on_m_token_update_operators
      pattern:
      - destination: <m_token_contract>
        entrypoint: update_operators
    - callback: on_m_token_mint_or_burn
      pattern:
      - destination: <m_token_contract>
        entrypoint: mintOrBurn
  # Governance satellite snapshot template
  # Index the snapshot ledger bigmap of the governance contract
  governance_satellite_snapshot_template:
    kind: big_map
    datasource: tzkt_ghostnet
    skip_history: never
    handlers:
    - callback: on_governance_snapshot_ledger_update
      contract: <governance_contract>
      path: snapshotLedger
  # Main Template - Mavryk Finance
  # Ran after the governance origination and index the entire dApp
  mavryk_finance_template:
    kind: operation
    datasource: tzkt_ghostnet
    types:
    - origination
    - transaction
    contracts:
    - <governance_contract>
    - <governance_proxy_contract>
    - <mvk_token_contract>
    - <mvk_faucet_contract>
    - <doorman_contract>
    - <delegation_contract>
    - <vesting_contract>
    - <emergency_governance_contract>
    - <council_contract>
    - <break_glass_contract>
    - <governance_financial_contract>
    - <governance_satellite_contract>
    - <aggregator_factory_contract>
    - <treasury_factory_contract>
    - <vault_factory_contract>
    - <lending_controller_contract>
    - <lending_controller_mock_time_contract>
    handlers:
    # Contracts origination
    # Index contracts originations first
    - callback: on_mvk_origination
      pattern:
      - type: origination
        originated_contract: <mvk_token_contract>
    - callback: on_mvk_faucet_origination
      pattern:
      - type: origination
        originated_contract: <mvk_faucet_contract>
    - callback: on_governance_proxy_origination
      pattern:
      - type: origination
        originated_contract: <governance_proxy_contract>
    - callback: on_doorman_origination
      pattern:
      - type: origination
        originated_contract: <doorman_contract>
    - callback: on_farm_factory_origination
      pattern:
      - type: origination
        originated_contract: <farm_factory_contract>
    - callback: on_delegation_origination
      pattern:
      - type: origination
        originated_contract: <delegation_contract>
    - callback: on_vesting_origination
      pattern:
      - type: origination
        originated_contract: <vesting_contract>
    - callback: on_emergency_governance_origination
      pattern:
      - type: origination
        originated_contract: <emergency_governance_contract>
    - callback: on_council_origination
      pattern:
      - type: origination
        originated_contract: <council_contract>
    - callback: on_break_glass_origination
      pattern:
      - type: origination
        originated_contract: <break_glass_contract>
    - callback: on_governance_financial_origination
      pattern:
      - type: origination
        originated_contract: <governance_financial_contract>
    - callback: on_governance_satellite_origination
      pattern:
      - type: origination
        originated_contract: <governance_satellite_contract>
    - callback: on_aggregator_factory_origination
      pattern:
      - type: origination
        originated_contract: <aggregator_factory_contract>
    - callback: on_treasury_factory_origination
      pattern:
      - type: origination
        originated_contract: <treasury_factory_contract>
    - callback: on_vault_factory_origination
      pattern:
      - type: origination
        originated_contract: <vault_factory_contract>
    - callback: on_lending_controller_origination
      pattern:
      - type: origination
        originated_contract: <lending_controller_contract>
    - callback: on_lending_controller_mock_time_origination
      pattern:
      - type: origination
        originated_contract: <lending_controller_mock_time_contract>

    # Contracts entrypoints
    # MVK Token handlers
    - callback: on_mvk_set_admin
      pattern:
      - destination: <mvk_token_contract>
        entrypoint: setAdmin
    - callback: on_mvk_set_governance
      pattern:
      - destination: <mvk_token_contract>
        entrypoint: setGovernance
    - callback: on_mvk_update_whitelist_contracts
      pattern:
      - destination: <mvk_token_contract>
        entrypoint: updateWhitelistContracts
    - callback: on_mvk_update_general_contracts
      pattern:
      - destination: <mvk_token_contract>
        entrypoint: updateGeneralContracts
    - callback: on_mvk_transfer
      pattern:
      - destination: <mvk_token_contract>
        entrypoint: transfer
    - callback: on_mvk_update_operators
      pattern:
      - destination: <mvk_token_contract>
        entrypoint: update_operators
    - callback: on_mvk_mint
      pattern:
      - destination: <mvk_token_contract>
        entrypoint: mint
    - callback: on_mvk_burn
      pattern:
      - destination: <mvk_token_contract>
        entrypoint: burn
    - callback: on_mvk_update_inflation_rate
      pattern:
      - destination: <mvk_token_contract>
        entrypoint: updateInflationRate
    - callback: on_mvk_trigger_inflation
      pattern:
      - destination: <mvk_token_contract>
        entrypoint: triggerInflation

    # MVK Faucet handlers
    - callback: on_mvk_faucet_request_mvk
      pattern:
      - destination: <mvk_faucet_contract>
        entrypoint: requestMvk

    # Governance Proxy Handlers
    - callback: on_governance_proxy_set_admin
      pattern:
      - destination: <governance_proxy_contract>
        entrypoint: setAdmin
    - callback: on_governance_proxy_set_governance
      pattern:
      - destination: <governance_proxy_contract>
        entrypoint: setGovernance
    - callback: on_governance_proxy_set_lambda
      pattern:
      - destination: <governance_proxy_contract>
        entrypoint: setLambda

    # Governance Handlers
    - callback: on_governance_break_glass
      pattern:
      - destination: <governance_contract>
        entrypoint: breakGlass
    - callback: on_governance_set_admin
      pattern:
      - destination: <governance_contract>
        entrypoint: setAdmin
    - callback: on_governance_set_governance_proxy
      pattern:
      - destination: <governance_contract>
        entrypoint: setGovernanceProxy
    - callback: on_governance_update_config
      pattern:
      - destination: <governance_contract>
        entrypoint: updateConfig
    - callback: on_governance_update_general_contracts
      pattern:
      - destination: <governance_contract>
        entrypoint: updateGeneralContracts
    - callback: on_governance_update_whitelist_contracts
      pattern:
      - destination: <governance_contract>
        entrypoint: updateWhitelistContracts
    - callback: on_governance_update_whitelist_developers
      pattern:
      - destination: <governance_contract>
        entrypoint: updateWhitelistDevelopers
    - callback: on_governance_start_next_round
      pattern:
      - destination: <governance_contract>
        entrypoint: startNextRound
    - callback: on_governance_propose
      pattern:
      - destination: <governance_contract>
        entrypoint: propose
    - callback: on_governance_proposal_round_vote
      pattern:
      - destination: <governance_contract>
        entrypoint: proposalRoundVote
    - callback: on_governance_update_proposal_data
      pattern:
      - destination: <governance_contract>
        entrypoint: updateProposalData
    - callback: on_governance_lock_proposal
      pattern:
      - destination: <governance_contract>
        entrypoint: lockProposal
    - callback: on_governance_voting_round_vote
      pattern:
      - destination: <governance_contract>
        entrypoint: votingRoundVote
    - callback: on_governance_execute_proposal
      pattern:
      - destination: <governance_contract>
        entrypoint: executeProposal
    - callback: on_governance_process_proposal_payment
      pattern:
      - destination: <governance_contract>
        entrypoint: processProposalPayment
    - callback: on_governance_process_proposal_single_data
      pattern:
      - destination: <governance_contract>
        entrypoint: processProposalSingleData
    - callback: on_governance_drop_proposal
      pattern:
      - destination: <governance_contract>
        entrypoint: dropProposal
    - callback: on_governance_distribute_proposal_rewards
      pattern:
      - destination: <governance_contract>
        entrypoint: distributeProposalRewards
    - callback: on_governance_set_lambda
      pattern:
      - destination: <governance_contract>
        entrypoint: setLambda
    
    # Doorman Handlers
    - callback: on_doorman_set_admin
      pattern:
      - destination: <doorman_contract>
        entrypoint: setAdmin
    - callback: on_doorman_set_governance
      pattern:
      - destination: <doorman_contract>
        entrypoint: setGovernance
    - callback: on_doorman_update_config
      pattern:
      - destination: <doorman_contract>
        entrypoint: updateConfig
    - callback: on_doorman_update_whitelist_contracts
      pattern:
      - destination: <doorman_contract>
        entrypoint: updateWhitelistContracts
    - callback: on_doorman_update_general_contracts
      pattern:
      - destination: <doorman_contract>
        entrypoint: updateGeneralContracts
    - callback: on_doorman_pause_all
      pattern:
      - destination: <doorman_contract>
        entrypoint: pauseAll
    - callback: on_doorman_unpause_all
      pattern:
      - destination: <doorman_contract>
        entrypoint: unpauseAll
    - callback: on_doorman_toggle_pause_entrypoint
      pattern:
      - destination: <doorman_contract>
        entrypoint: togglePauseEntrypoint
    - callback: on_doorman_stake
      pattern:
      - destination: <doorman_contract>
        entrypoint: stake
      - source: <doorman_contract>
        destination: <mvk_token_contract>
        entrypoint: transfer
    - callback: on_doorman_unstake
      pattern:
      - destination: <doorman_contract>
        entrypoint: unstake
      - source: <doorman_contract>
        destination: <mvk_token_contract>
        entrypoint: transfer
    - callback: on_doorman_exit
      pattern:
      - destination: <doorman_contract>
        entrypoint: exit
      - source: doorman
        destination: <mvk_token_contract>
        entrypoint: transfer
    - callback: on_doorman_compound
      pattern:
      - destination: <doorman_contract>
        entrypoint: compound
    - callback: on_doorman_farm_claim
      pattern:
      - destination: <doorman_contract>
        entrypoint: farmClaim
    - callback: on_doorman_on_vault_deposit_stake
      pattern:
      - destination: <doorman_contract>
        entrypoint: onVaultDepositStake
    - callback: on_doorman_on_vault_withdraw_stake
      pattern:
      - destination: <doorman_contract>
        entrypoint: onVaultWithdrawStake
    - callback: on_doorman_on_vault_liquidate_stake
      pattern:
      - destination: <doorman_contract>
        entrypoint: onVaultLiquidateStake
    - callback: on_doorman_set_lambda
      pattern:
      - destination: <doorman_contract>
        entrypoint: setLambda

    # Farm Factory Handlers 
    - callback: on_farm_factory_set_admin
      pattern:
      - destination: <farm_factory_contract>
        entrypoint: setAdmin
    - callback: on_farm_factory_set_governance
      pattern:
      - destination: <farm_factory_contract>
        entrypoint: setGovernance
    - callback: on_farm_factory_update_config
      pattern:
      - destination: <farm_factory_contract>
        entrypoint: updateConfig
    - callback: on_farm_factory_update_whitelist_contracts
      pattern:
      - destination: <farm_factory_contract>
        entrypoint: updateWhitelistContracts
    - callback: on_farm_factory_update_general_contracts
      pattern:
      - destination: <farm_factory_contract>
        entrypoint: updateGeneralContracts
    - callback: on_farm_factory_pause_all
      pattern:
      - destination: <farm_factory_contract>
        entrypoint: pauseAll
    - callback: on_farm_factory_unpause_all
      pattern:
      - destination: <farm_factory_contract>
        entrypoint: unpauseAll
    - callback: on_farm_factory_toggle_pause_entrypoint
      pattern:
      - destination: <farm_factory_contract>
        entrypoint: togglePauseEntrypoint
    - callback: on_farm_factory_create_farm
      pattern:
      - destination: <farm_factory_contract>
        entrypoint: createFarm
      - source: <farm_factory_contract>
        type: origination
        originated_contract: farm
    - callback: on_farm_factory_create_farm_m_token
      pattern:
      - destination: <farm_factory_contract>
        entrypoint: createFarmMToken
      - source: <farm_factory_contract>
        type: origination
        originated_contract: farm_m_token
    - callback: on_farm_factory_track_farm
      pattern:
      - destination: <farm_factory_contract>
        entrypoint: trackFarm
    - callback: on_farm_factory_untrack_farm
      pattern:
      - destination: <farm_factory_contract>
        entrypoint: untrackFarm
    - callback: on_farm_factory_set_lambda
      pattern:
      - destination: <farm_factory_contract>
        entrypoint: setLambda
    - callback: on_farm_factory_set_product_lambda
      pattern:
      - destination: <farm_factory_contract>
        entrypoint: setProductLambda

    # Delegation Handlers
    - callback: on_delegation_set_admin
      pattern:
      - destination: <delegation_contract>
        entrypoint: setAdmin
    - callback: on_delegation_set_governance
      pattern:
      - destination: <delegation_contract>
        entrypoint: setGovernance
    - callback: on_delegation_update_config
      pattern:
      - destination: <delegation_contract>
        entrypoint: updateConfig
    - callback: on_delegation_update_whitelist_contracts
      pattern:
      - destination: <delegation_contract>
        entrypoint: updateWhitelistContracts
    - callback: on_delegation_update_general_contracts
      pattern:
      - destination: <delegation_contract>
        entrypoint: updateGeneralContracts
    - callback: on_delegation_pause_all
      pattern:
      - destination: <delegation_contract>
        entrypoint: pauseAll
    - callback: on_delegation_unpause_all
      pattern:
      - destination: <delegation_contract>
        entrypoint: unpauseAll
    - callback: on_delegation_toggle_pause_entrypoint
      pattern:
      - destination: <delegation_contract>
        entrypoint: togglePauseEntrypoint
    - callback: on_delegation_delegate_to_satellite
      pattern:
      - destination: <delegation_contract>
        entrypoint: delegateToSatellite
    - callback: on_delegation_undelegate_from_satellite
      pattern:
      - destination: <delegation_contract>
        entrypoint: undelegateFromSatellite
    - callback: on_delegation_register_as_satellite
      pattern:
      - destination: <delegation_contract>
        entrypoint: registerAsSatellite
    - callback: on_delegation_unregister_as_satellite
      pattern:
      - destination: <delegation_contract>
        entrypoint: unregisterAsSatellite
    - callback: on_delegation_update_satellite_record
      pattern:
      - destination: <delegation_contract>
        entrypoint: updateSatelliteRecord
    - callback: on_delegation_distribute_reward
      pattern:
      - destination: <delegation_contract>
        entrypoint: distributeReward
    - callback: on_delegation_update_satellite_status
      pattern:
      - destination: <delegation_contract>
        entrypoint: updateSatelliteStatus
    - callback: on_delegation_on_stake_change
      pattern:
      - destination: <delegation_contract>
        entrypoint: onStakeChange
    - callback: on_delegation_set_lambda
      pattern:
      - destination: <delegation_contract>
        entrypoint: setLambda

    # Vesting Handlers
    - callback: on_vesting_set_admin
      pattern:
      - destination: <vesting_contract>
        entrypoint: setAdmin
    - callback: on_vesting_set_governance
      pattern:
      - destination: <vesting_contract>
        entrypoint: setGovernance
    - callback: on_vesting_update_whitelist_contracts
      pattern:
      - destination: <vesting_contract>
        entrypoint: updateWhitelistContracts
    - callback: on_vesting_update_general_contracts
      pattern:
      - destination: <vesting_contract>
        entrypoint: updateGeneralContracts
    - callback: on_vesting_add_vestee
      pattern:
      - destination: <vesting_contract>
        entrypoint: addVestee
    - callback: on_vesting_remove_vestee
      pattern:
      - destination: <vesting_contract>
        entrypoint: removeVestee
    - callback: on_vesting_update_vestee
      pattern:
      - destination: <vesting_contract>
        entrypoint: updateVestee
    - callback: on_vesting_toggle_vestee_lock
      pattern:
      - destination: <vesting_contract>
        entrypoint: toggleVesteeLock
    - callback: on_vesting_claim
      pattern:
      - destination: <vesting_contract>
        entrypoint: claim
    - callback: on_vesting_set_lambda
      pattern:
      - destination: <vesting_contract>
        entrypoint: setLambda

    # Emergency Governance Handlers
    - callback: on_emergency_governance_set_admin
      pattern:
      - destination: <emergency_governance_contract>
        entrypoint: setAdmin
    - callback: on_emergency_governance_set_governance
      pattern:
      - destination: <emergency_governance_contract>
        entrypoint: setGovernance
    - callback: on_emergency_governance_update_config
      pattern:
      - destination: <emergency_governance_contract>
        entrypoint: updateConfig
    - callback: on_emergency_governance_update_general_contracts
      pattern:
      - destination: <emergency_governance_contract>
        entrypoint: updateGeneralContracts
    - callback: on_emergency_governance_update_whitelist_contracts
      pattern:
      - destination: <emergency_governance_contract>
        entrypoint: updateWhitelistContracts
    - callback: on_emergency_governance_trigger_emergency_control
      pattern:
      - destination: <emergency_governance_contract>
        entrypoint: triggerEmergencyControl
    - callback: on_emergency_governance_vote_for_emergency_control
      pattern:
      - destination: <emergency_governance_contract>
        entrypoint: voteForEmergencyControl
    - callback: on_emergency_governance_drop_emergency_governance
      pattern:
      - destination: <emergency_governance_contract>
        entrypoint: dropEmergencyGovernance
    - callback: on_emergency_governance_set_lambda
      pattern:
      - destination: <emergency_governance_contract>
        entrypoint: setLambda

    # Council Handlers
    - callback: on_council_set_admin
      pattern:
      - destination: <council_contract>
        entrypoint: setAdmin
    - callback: on_council_set_governance
      pattern:
      - destination: <council_contract>
        entrypoint: setGovernance
    - callback: on_council_update_config
      pattern:
      - destination: <council_contract>
        entrypoint: updateConfig
    - callback: on_council_update_whitelist_contracts
      pattern:
      - destination: <council_contract>
        entrypoint: updateWhitelistContracts
    - callback: on_council_update_general_contracts
      pattern:
      - destination: <council_contract>
        entrypoint: updateGeneralContracts
    - callback: on_council_update_council_member_info
      pattern:
      - destination: <council_contract>
        entrypoint: updateCouncilMemberInfo
    - callback: on_council_council_action_add_member
      pattern:
      - destination: <council_contract>
        entrypoint: councilActionAddMember
    - callback: on_council_council_action_remove_member
      pattern:
      - destination: <council_contract>
        entrypoint: councilActionRemoveMember
    - callback: on_council_council_action_change_member
      pattern:
      - destination: <council_contract>
        entrypoint: councilActionChangeMember
    - callback: on_council_council_action_set_baker
      pattern:
      - destination: <council_contract>
        entrypoint: councilActionSetBaker
    - callback: on_council_council_action_add_vestee
      pattern:
      - destination: <council_contract>
        entrypoint: councilActionAddVestee
    - callback: on_council_council_action_remove_vestee
      pattern:
      - destination: <council_contract>
        entrypoint: councilActionRemoveVestee
    - callback: on_council_council_action_update_vestee
      pattern:
      - destination: <council_contract>
        entrypoint: councilActionUpdateVestee
    - callback: on_council_council_action_toggle_vestee_lock
      pattern:
      - destination: <council_contract>
        entrypoint: councilActionToggleVesteeLock
    - callback: on_council_council_action_transfer
      pattern:
      - destination: <council_contract>
        entrypoint: councilActionTransfer
    - callback: on_council_council_action_request_tokens
      pattern:
      - destination: <council_contract>
        entrypoint: councilActionRequestTokens
    - callback: on_council_council_action_request_mint
      pattern:
      - destination: <council_contract>
        entrypoint: councilActionRequestMint
    - callback: on_council_council_action_set_contract_baker
      pattern:
      - destination: <council_contract>
        entrypoint: councilActionSetContractBaker
    - callback: on_council_council_action_drop_financial_req
      pattern:
      - destination: <council_contract>
        entrypoint: councilActionDropFinancialReq
    - callback: on_council_flush_action
      pattern:
      - destination: <council_contract>
        entrypoint: flushAction
    - callback: on_council_sign_action
      pattern:
      - destination: <council_contract>
        entrypoint: signAction
    - callback: on_council_set_lambda
      pattern:
      - destination: <council_contract>
        entrypoint: setLambda

    # Break Glass Handlers
    - callback: on_break_glass_break_glass
      pattern:
      - destination: <break_glass_contract>
        entrypoint: breakGlass
    - callback: on_break_glass_set_admin
      pattern:
      - destination: <break_glass_contract>
        entrypoint: setAdmin
    - callback: on_break_glass_set_governance
      pattern:
      - destination: <break_glass_contract>
        entrypoint: setGovernance
    - callback: on_break_glass_update_config
      pattern:
      - destination: <break_glass_contract>
        entrypoint: updateConfig
    - callback: on_break_glass_update_whitelist_contracts
      pattern:
      - destination: <break_glass_contract>
        entrypoint: updateWhitelistContracts
    - callback: on_break_glass_update_general_contracts
      pattern:
      - destination: <break_glass_contract>
        entrypoint: updateGeneralContracts
    - callback: on_break_glass_update_council_member_info
      pattern:
      - destination: <break_glass_contract>
        entrypoint: updateCouncilMemberInfo
    - callback: on_break_glass_council_action_add_member
      pattern:
      - destination: <break_glass_contract>
        entrypoint: councilActionAddMember
    - callback: on_break_glass_council_action_remove_member
      pattern:
      - destination: <break_glass_contract>
        entrypoint: councilActionRemoveMember
    - callback: on_break_glass_council_action_change_member
      pattern:
      - destination: <break_glass_contract>
        entrypoint: councilActionChangeMember
    - callback: on_break_glass_propagate_break_glass
      pattern:
      - destination: <break_glass_contract>
        entrypoint: propagateBreakGlass
    - callback: on_break_glass_set_contracts_admin
      pattern:
      - destination: <break_glass_contract>
        entrypoint: setContractsAdmin
    - callback: on_break_glass_pause_all_entrypoints
      pattern:
      - destination: <break_glass_contract>
        entrypoint: pauseAllEntrypoints
    - callback: on_break_glass_unpause_all_entrypoints
      pattern:
      - destination: <break_glass_contract>
        entrypoint: unpauseAllEntrypoints
    - callback: on_break_glass_remove_break_glass_control
      pattern:
      - destination: <break_glass_contract>
        entrypoint: removeBreakGlassControl
    - callback: on_break_glass_flush_action
      pattern:
      - destination: <break_glass_contract>
        entrypoint: flushAction
    - callback: on_break_glass_sign_action
      pattern:
      - destination: <break_glass_contract>
        entrypoint: signAction
    - callback: on_break_glass_set_lambda
      pattern:
      - destination: <break_glass_contract>
        entrypoint: setLambda

    # Governance Financial Handlers
    - callback: on_governance_financial_set_admin
      pattern:
      - destination: <governance_financial_contract>
        entrypoint: setAdmin
    - callback: on_governance_financial_set_governance
      pattern:
      - destination: <governance_financial_contract>
        entrypoint: setGovernance
    - callback: on_governance_financial_update_config
      pattern:
      - destination: <governance_financial_contract>
        entrypoint: updateConfig
    - callback: on_governance_financial_update_general_contracts
      pattern:
      - destination: <governance_financial_contract>
        entrypoint: updateGeneralContracts
    - callback: on_governance_financial_update_whitelist_contracts
      pattern:
      - destination: <governance_financial_contract>
        entrypoint: updateWhitelistContracts
    - callback: on_governance_financial_update_whitelist_token_contracts
      pattern:
      - destination: <governance_financial_contract>
        entrypoint: updateWhitelistTokenContracts
    - callback: on_governance_financial_request_tokens
      pattern:
      - destination: <governance_financial_contract>
        entrypoint: requestTokens
    - callback: on_governance_financial_request_mint
      pattern:
      - destination: <governance_financial_contract>
        entrypoint: requestMint
    - callback: on_governance_financial_set_contract_baker
      pattern:
      - destination: <governance_financial_contract>
        entrypoint: setContractBaker
    - callback: on_governance_financial_drop_financial_request
      pattern:
      - destination: <governance_financial_contract>
        entrypoint: dropFinancialRequest
    - callback: on_governance_financial_vote_for_request
      pattern:
      - destination: <governance_financial_contract>
        entrypoint: voteForRequest
    - callback: on_governance_financial_set_lambda
      pattern:
      - destination: <governance_financial_contract>
        entrypoint: setLambda

    # Governance Satellite Handlers
    - callback: on_governance_satellite_set_admin
      pattern:
      - destination: <governance_satellite_contract>
        entrypoint: setAdmin
    - callback: on_governance_satellite_set_governance
      pattern:
      - destination: <governance_satellite_contract>
        entrypoint: setGovernance
    - callback: on_governance_satellite_update_config
      pattern:
      - destination: <governance_satellite_contract>
        entrypoint: updateConfig
    - callback: on_governance_satellite_update_whitelist_contracts
      pattern:
      - destination: <governance_satellite_contract>
        entrypoint: updateWhitelistContracts
    - callback: on_governance_satellite_update_general_contracts
      pattern:
      - destination: <governance_satellite_contract>
        entrypoint: updateGeneralContracts
    - callback: on_governance_satellite_suspend_satellite
      pattern:
      - destination: <governance_satellite_contract>
        entrypoint: suspendSatellite
    - callback: on_governance_satellite_ban_satellite
      pattern:
      - destination: <governance_satellite_contract>
        entrypoint: banSatellite
    - callback: on_governance_satellite_restore_satellite
      pattern:
      - destination: <governance_satellite_contract>
        entrypoint: restoreSatellite
    - callback: on_governance_satellite_remove_all_satellite_oracles
      pattern:
      - destination: <governance_satellite_contract>
        entrypoint: removeAllSatelliteOracles
    - callback: on_governance_satellite_add_oracle_to_aggregator
      pattern:
      - destination: <governance_satellite_contract>
        entrypoint: addOracleToAggregator
    - callback: on_governance_satellite_remove_oracle_in_aggregator
      pattern:
      - destination: <governance_satellite_contract>
        entrypoint: removeOracleInAggregator
    - callback: on_governance_satellite_toggle_pause_aggregator
      pattern:
      - destination: <governance_satellite_contract>
        entrypoint: togglePauseAggregator
    - callback: on_governance_satellite_fix_mistaken_transfer
      pattern:
      - destination: <governance_satellite_contract>
        entrypoint: fixMistakenTransfer
    - callback: on_governance_satellite_drop_action
      pattern:
      - destination: <governance_satellite_contract>
        entrypoint: dropAction
    - callback: on_governance_satellite_vote_for_action
      pattern:
      - destination: <governance_satellite_contract>
        entrypoint: voteForAction
    - callback: on_governance_satellite_set_lambda
      pattern:
      - destination: <governance_satellite_contract>
        entrypoint: setLambda

    # Aggregator Factory Handlers
    - callback: on_aggregator_factory_set_admin
      pattern:
      - destination: <aggregator_factory_contract>
        entrypoint: setAdmin
    - callback: on_aggregator_factory_set_governance
      pattern:
      - destination: <aggregator_factory_contract>
        entrypoint: setGovernance
    - callback: on_aggregator_factory_update_config
      pattern:
      - destination: <aggregator_factory_contract>
        entrypoint: updateConfig
    - callback: on_aggregator_factory_update_whitelist_contracts
      pattern:
      - destination: <aggregator_factory_contract>
        entrypoint: updateWhitelistContracts
    - callback: on_aggregator_factory_update_general_contracts
      pattern:
      - destination: <aggregator_factory_contract>
        entrypoint: updateGeneralContracts
    - callback: on_aggregator_factory_pause_all
      pattern:
      - destination: <aggregator_factory_contract>
        entrypoint: pauseAll
    - callback: on_aggregator_factory_unpause_all
      pattern:
      - destination: <aggregator_factory_contract>
        entrypoint: unpauseAll
    - callback: on_aggregator_factory_toggle_pause_entrypoint
      pattern:
      - destination: <aggregator_factory_contract>
        entrypoint: togglePauseEntrypoint
    - callback: on_aggregator_factory_create_aggregator
      pattern:
      - destination: <aggregator_factory_contract>
        entrypoint: createAggregator
      - source: <aggregator_factory_contract>
        type: origination
        originated_contract: aggregator
    - callback: on_aggregator_factory_track_aggregator
      pattern:
      - destination: <aggregator_factory_contract>
        entrypoint: trackAggregator
    - callback: on_aggregator_factory_untrack_aggregator
      pattern:
      - destination: <aggregator_factory_contract>
        entrypoint: untrackAggregator
    - callback: on_aggregator_factory_set_lambda
      pattern:
      - destination: <aggregator_factory_contract>
        entrypoint: setLambda
    - callback: on_aggregator_factory_set_product_lambda
      pattern:
      - destination: <aggregator_factory_contract>
        entrypoint: setProductLambda

    # Treasury Factory Handlers
    - callback: on_treasury_factory_set_admin
      pattern:
      - destination: <treasury_factory_contract>
        entrypoint: setAdmin
    - callback: on_treasury_factory_set_governance
      pattern:
      - destination: <treasury_factory_contract>
        entrypoint: setGovernance
    - callback: on_treasury_factory_update_config
      pattern:
      - destination: <treasury_factory_contract>
        entrypoint: updateConfig
    - callback: on_treasury_factory_update_general_contracts
      pattern:
      - destination: <treasury_factory_contract>
        entrypoint: updateGeneralContracts
    - callback: on_treasury_factory_update_whitelist_contracts
      pattern:
      - destination: <treasury_factory_contract>
        entrypoint: updateWhitelistContracts
    - callback: on_treasury_factory_update_whitelist_token_contracts
      pattern:
      - destination: <treasury_factory_contract>
        entrypoint: updateWhitelistTokenContracts
    - callback: on_treasury_factory_pause_all
      pattern:
      - destination: <treasury_factory_contract>
        entrypoint: pauseAll
    - callback: on_treasury_factory_unpause_all
      pattern:
      - destination: <treasury_factory_contract>
        entrypoint: unpauseAll
    - callback: on_treasury_factory_toggle_pause_entrypoint
      pattern:
      - destination: <treasury_factory_contract>
        entrypoint: togglePauseEntrypoint
    - callback: on_treasury_factory_create_treasury
      pattern:
      - destination: <treasury_factory_contract>
        entrypoint: createTreasury
      - source: <treasury_factory_contract>
        type: origination
        originated_contract: treasury
    - callback: on_treasury_factory_track_treasury
      pattern:
      - destination: <treasury_factory_contract>
        entrypoint: trackTreasury
    - callback: on_treasury_factory_untrack_treasury
      pattern:
      - destination: <treasury_factory_contract>
        entrypoint: untrackTreasury
    - callback: on_treasury_factory_set_lambda
      pattern:
      - destination: <treasury_factory_contract>
        entrypoint: setLambda
    - callback: on_treasury_factory_set_product_lambda
      pattern:
      - destination: <treasury_factory_contract>
        entrypoint: setProductLambda

    # Vault Factory Handlers
    - callback: on_vault_factory_set_admin
      pattern:
      - destination: <vault_factory_contract>
        entrypoint: setAdmin
    - callback: on_vault_factory_set_governance
      pattern:
      - destination: <vault_factory_contract>
        entrypoint: setGovernance
    - callback: on_vault_factory_update_config
      pattern:
      - destination: <vault_factory_contract>
        entrypoint: updateConfig
    - callback: on_vault_factory_update_general_contracts
      pattern:
      - destination: <vault_factory_contract>
        entrypoint: updateGeneralContracts
    - callback: on_vault_factory_update_whitelist_contracts
      pattern:
      - destination: <vault_factory_contract>
        entrypoint: updateWhitelistContracts
    - callback: on_vault_factory_pause_all
      pattern:
      - destination: <vault_factory_contract>
        entrypoint: pauseAll
    - callback: on_vault_factory_unpause_all
      pattern:
      - destination: <vault_factory_contract>
        entrypoint: unpauseAll
    - callback: on_vault_factory_toggle_pause_entrypoint
      pattern:
      - destination: <vault_factory_contract>
        entrypoint: togglePauseEntrypoint
    - callback: on_vault_factory_create_vault
      pattern:
      - destination: <vault_factory_contract>
        entrypoint: createVault
      - source: <vault_factory_contract>
        type: origination
        originated_contract: vault
      - source: <vault_factory_contract>
        destination: <lending_controller_contract>
        entrypoint: registerVaultCreation
    - callback: on_vault_factory_create_vault_mock_time
      pattern:
      - destination: <vault_factory_contract>
        entrypoint: createVault
      - source: <vault_factory_contract>
        type: origination
        originated_contract: vault
      - source: <vault_factory_contract>
        destination: <lending_controller_mock_time_contract>
        entrypoint: registerVaultCreation
    - callback: on_vault_factory_set_lambda
      pattern:
      - destination: <vault_factory_contract>
        entrypoint: setLambda
    - callback: on_vault_factory_set_product_lambda
      pattern:
      - destination: <vault_factory_contract>
        entrypoint: setProductLambda

    # Lending Controller Handlers
    - callback: on_lending_controller_set_admin
      pattern:
      - destination: <lending_controller_contract>
        entrypoint: setAdmin
    - callback: on_lending_controller_set_governance
      pattern:
      - destination: <lending_controller_contract>
        entrypoint: setGovernance
    - callback: on_lending_controller_update_config
      pattern:
      - destination: <lending_controller_contract>
        entrypoint: updateConfig
    - callback: on_lending_controller_update_whitelist_token_contracts
      pattern:
      - destination: <lending_controller_contract>
        entrypoint: updateWhitelistTokenContracts
    - callback: on_lending_controller_pause_all
      pattern:
      - destination: <lending_controller_contract>
        entrypoint: pauseAll
    - callback: on_lending_controller_unpause_all
      pattern:
      - destination: <lending_controller_contract>
        entrypoint: unpauseAll
    - callback: on_lending_controller_toggle_pause_entrypoint
      pattern:
      - destination: <lending_controller_contract>
        entrypoint: togglePauseEntrypoint
    - callback: on_lending_controller_set_loan_token
      pattern:
      - destination: <lending_controller_contract>
        entrypoint: setLoanToken
    - callback: on_lending_controller_set_collateral_token
      pattern:
      - destination: <lending_controller_contract>
        entrypoint: setCollateralToken
    - callback: on_lending_controller_add_liquidity
      pattern:
      - destination: <lending_controller_contract>
        entrypoint: addLiquidity
    - callback: on_lending_controller_remove_liquidity
      pattern:
      - destination: <lending_controller_contract>
        entrypoint: removeLiquidity
    - callback: on_lending_controller_close_vault
      pattern:
      - destination: <lending_controller_contract>
        entrypoint: closeVault
    - callback: on_lending_controller_register_deposit
      pattern:
      - destination: <lending_controller_contract>
        entrypoint: registerDeposit
    - callback: on_lending_controller_register_withdrawal
      pattern:
      - destination: <lending_controller_contract>
        entrypoint: registerWithdrawal
    - callback: on_lending_controller_mark_for_liquidation
      pattern:
      - destination: <lending_controller_contract>
        entrypoint: markForLiquidation
    - callback: on_lending_controller_liquidate_vault
      pattern:
      - destination: <lending_controller_contract>
        entrypoint: liquidateVault
    - callback: on_lending_controller_borrow
      pattern:
      - destination: <lending_controller_contract>
        entrypoint: borrow
    - callback: on_lending_controller_repay
      pattern:
      - destination: <lending_controller_contract>
        entrypoint: repay
    - callback: on_lending_controller_vault_deposit_staked_token
      pattern:
      - destination: <lending_controller_contract>
        entrypoint: vaultDepositStakedToken
    - callback: on_lending_controller_vault_withdraw_staked_token
      pattern:
      - destination: <lending_controller_contract>
        entrypoint: vaultWithdrawStakedToken
    - callback: on_lending_controller_set_lambda
      pattern:
      - destination: <lending_controller_contract>
        entrypoint: setLambda

    # Lending Controller Mock Time Handlers
    - callback: on_lending_controller_mock_time_set_admin
      pattern:
      - destination: <lending_controller_mock_time_contract>
        entrypoint: setAdmin
    - callback: on_lending_controller_mock_time_set_governance
      pattern:
      - destination: <lending_controller_mock_time_contract>
        entrypoint: setGovernance
    - callback: on_lending_controller_mock_time_update_config
      pattern:
      - destination: <lending_controller_mock_time_contract>
        entrypoint: updateConfig
    - callback: on_lending_controller_mock_time_update_whitelist_token_contracts
      pattern:
      - destination: <lending_controller_mock_time_contract>
        entrypoint: updateWhitelistTokenContracts
    - callback: on_lending_controller_mock_time_pause_all
      pattern:
      - destination: <lending_controller_mock_time_contract>
        entrypoint: pauseAll
    - callback: on_lending_controller_mock_time_unpause_all
      pattern:
      - destination: <lending_controller_mock_time_contract>
        entrypoint: unpauseAll
    - callback: on_lending_controller_mock_time_toggle_pause_entrypoint
      pattern:
      - destination: <lending_controller_mock_time_contract>
        entrypoint: togglePauseEntrypoint
    - callback: on_lending_controller_mock_time_set_loan_token
      pattern:
      - destination: <lending_controller_mock_time_contract>
        entrypoint: setLoanToken
    - callback: on_lending_controller_mock_time_set_collateral_token
      pattern:
      - destination: <lending_controller_mock_time_contract>
        entrypoint: setCollateralToken
    - callback: on_lending_controller_mock_time_add_liquidity
      pattern:
      - destination: <lending_controller_mock_time_contract>
        entrypoint: addLiquidity
    - callback: on_lending_controller_mock_time_remove_liquidity
      pattern:
      - destination: <lending_controller_mock_time_contract>
        entrypoint: removeLiquidity
    - callback: on_lending_controller_mock_time_close_vault
      pattern:
      - destination: <lending_controller_mock_time_contract>
        entrypoint: closeVault
    - callback: on_lending_controller_mock_time_register_deposit
      pattern:
      - destination: <lending_controller_mock_time_contract>
        entrypoint: registerDeposit
    - callback: on_lending_controller_mock_time_register_withdrawal
      pattern:
      - destination: <lending_controller_mock_time_contract>
        entrypoint: registerWithdrawal
    - callback: on_lending_controller_mock_time_mark_for_liquidation
      pattern:
      - destination: <lending_controller_mock_time_contract>
        entrypoint: markForLiquidation
    - callback: on_lending_controller_mock_time_liquidate_vault
      pattern:
      - destination: <lending_controller_mock_time_contract>
        entrypoint: liquidateVault
    - callback: on_lending_controller_mock_time_borrow
      pattern:
      - destination: <lending_controller_mock_time_contract>
        entrypoint: borrow
    - callback: on_lending_controller_mock_time_repay
      pattern:
      - destination: <lending_controller_mock_time_contract>
        entrypoint: repay
    - callback: on_lending_controller_mock_time_vault_deposit_staked_token
      pattern:
      - destination: <lending_controller_mock_time_contract>
        entrypoint: vaultDepositStakedToken
    - callback: on_lending_controller_mock_time_vault_withdraw_staked_token
      pattern:
      - destination: <lending_controller_mock_time_contract>
        entrypoint: vaultWithdrawStakedToken
    - callback: on_lending_controller_mock_time_set_lambda
      pattern:
      - destination: <lending_controller_mock_time_contract>
        entrypoint: setLambda

indexes:
  liquidity_baking:
    kind: operation
    datasource: tzkt_mainnet
    types:
    - origination
    - transaction
    contracts:
    - liquidity_baking
    - sirius
    handlers:
    # Liquidity baking handlers
    - callback: on_liquidity_baking_add_liquidity
      pattern:
      - destination: liquidity_baking
        entrypoint: addLiquidity
      - destination: tzbtc
        entrypoint: transfer
      - destination: sirius
        entrypoint: mintOrBurn
    - callback: on_liquidity_baking_remove_liquidity
      pattern:
      - destination: liquidity_baking
        entrypoint: removeLiquidity
      - destination: sirius
        entrypoint: mintOrBurn
      - destination: tzbtc
        entrypoint: transfer
      - source: liquidity_baking
        type: transaction
    - callback: on_liquidity_baking_token_to_xtz
      pattern:
      - destination: liquidity_baking
        entrypoint: tokenToXtz
      - destination: tzbtc
        entrypoint: transfer
      - source: liquidity_baking
        type: transaction
      - source: liquidity_baking
        type: transaction
    - callback: on_liquidity_baking_xtz_to_token
      pattern:
      - destination: liquidity_baking
        entrypoint: xtzToToken
      - destination: tzbtc
        entrypoint: transfer
    # Sirius handlers
    - callback: on_sirius_transfer
      pattern:
      - destination: sirius
        entrypoint: transfer
  mavryk_finance_ghostnet_init:
    kind: operation
    datasource: tzkt_ghostnet
    types:
    - origination
    contracts:
    - governance
    handlers:
    # Start by only initializing governance before anything else
    - callback: on_governance_origination
      pattern:
      - type: origination
        originated_contract: governance
